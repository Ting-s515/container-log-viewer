# Container Log Viewer - Docker Hub 快速部署
#
# === Linux / macOS ===
# curl -O https://raw.githubusercontent.com/Ting-s515/ContainerLogViewer/main/docker-compose.hub.yml
# docker-compose -f docker-compose.hub.yml up -d
#
# 自訂 port：
# CLIENT_PORT=8080 SERVER_PORT=3001 docker-compose -f docker-compose.hub.yml up -d
#
# === Windows (PowerShell) ===
# Invoke-WebRequest -Uri "https://raw.githubusercontent.com/Ting-s515/ContainerLogViewer/main/docker-compose.hub.yml" -OutFile "docker-compose.hub.yml"
# docker-compose -f docker-compose.hub.yml up -d
#
# 自訂 port：
# $env:CLIENT_PORT=7070; $env:SERVER_PORT=7100; docker-compose -f docker-compose.hub.yml up -d
#
# 啟動後開啟 http://localhost（或自訂的 CLIENT_PORT）

services:
  server:
    image: tings515/container-log-viewer-server:latest
    ports:
      - "${SERVER_PORT:-3001}:3001"
    volumes:
      # 掛載 Docker socket，讓容器內可以存取主機的 Docker/Podman
      - /var/run/docker.sock:/var/run/docker.sock
    restart: unless-stopped

  client:
    image: tings515/container-log-viewer-client:latest
    ports:
      - "${CLIENT_PORT:-80}:80"
    depends_on:
      - server
    restart: unless-stopped
